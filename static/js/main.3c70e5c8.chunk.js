(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),i=a.n(r),c=(a(81),a(18)),o=a(12),l=a(22),u=a(19),v=a(21),m=a(50),f=a(32),d=a(40),h=a(38),p=a(10),E=a(25),b=a.n(E),y=a(66),g=function(e){return"".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]," ").concat(e.getDate()," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()])},k=(a(48),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setCityEvent=a.setCityEvent.bind(Object(p.a)(a)),a.getEventsDays=a.getEventsDays.bind(Object(p.a)(a)),a.setEventDuration=a.setEventDuration.bind(Object(p.a)(a)),a.dateMeasure=a.dateMeasure.bind(Object(p.a)(a)),a}return Object(v.a)(t,e),Object(o.a)(t,[{key:"formatEventsData",value:function(){var e=this,t={};return this.props.events.forEach(function(a){a.startDate=new Date(a.startDate);var n="".concat(a.startDate.getDate()).concat(a.startDate.getMonth()).concat(a.startDate.getFullYear()),s=g(a.startDate);t[n]||(t[n]={id:n,date_formatted:s,full_date:new Date("".concat(s," ").concat(a.startDate.getFullYear())),events:[]}),n===t[n].id&&(a.city.name||e.setCityEvent(a),a.duration||e.setEventDuration(a),t[n].events.push(a))}),this.sortData(t)}},{key:"setCityEvent",value:function(e){var t=this.props.cities.find(function(t){return e.city===t.id});t&&(e.city=t)}},{key:"setEventDuration",value:function(e){e.duration=this.dateMeasure(new Date(e.endDate).getTime()-new Date(e.startDate).getTime())}},{key:"sortData",value:function(e){var t=this,a=Object.keys(e).map(function(t){return e[t]});return a.forEach(function(e){t.sortEvents(e.events)}),this.sortDays(a)}},{key:"dateMeasure",value:function(e){var t,a,n;return n=Math.floor(e/1e3),a=Math.floor(n/60),n%=60,t=Math.floor(a/60),a%=60,t%=24,this.setEventDurationFormat(t,a)}},{key:"setEventDurationFormat",value:function(e,t){return 0===e?t+"mins":0===t?e+"h":"".concat(e,"h ").concat(t,"mins")}},{key:"handleEvent",value:function(e){this.props.openModal(e)}},{key:"unsubscribeToEvent",value:function(e){var t=this;b.a.delete("https://5d48447c2d59e50014f209ff.mockapi.io/trivago/my-events/".concat(e.id)).then(function(e){t.props.refreshEvents()}).catch(function(e){return console.log(e)})}},{key:"getEventsDays",value:function(){var e=this;return this.formatEventsData().map(function(t,a){return s.a.createElement("div",{className:"day-events",key:"day-events-"+a},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement("h2",{className:"day-title"},t.date_formatted))),s.a.createElement("div",{className:"events-card"},t.events.map(function(t,a){return s.a.createElement("div",{className:"row event",key:"events-"+a},s.a.createElement("div",{className:"col-md-2 hour"},s.a.createElement("span",null,"".concat(t.startDate.getHours(),":").concat((t.startDate.getMinutes()<10?"0":"")+t.startDate.getMinutes()))),s.a.createElement("div",{className:"col-md-7 content"},s.a.createElement("p",null,t.name,s.a.createElement("span",{className:"free-event ml-3"},t.isFree?"Free":null)),s.a.createElement("div",{className:"event-details"},s.a.createElement("div",{className:"location mr-3"},s.a.createElement("i",{className:"fas fa-map-marker-alt"}),s.a.createElement("span",null,t.city.name)),s.a.createElement("div",{className:"duration"},s.a.createElement("i",{className:"fas fa-stopwatch"}),s.a.createElement("span",null,t.duration)))),s.a.createElement("div",{className:"col-md-3 buttons"},"All events"===e.props.component?s.a.createElement("button",{className:"btn sign-up",onClick:e.handleEvent.bind(e,t)},"Sign up"):s.a.createElement("button",{className:"btn sign-down",onClick:e.unsubscribeToEvent.bind(e,t)},"Unsubscribe")))})))})}},{key:"sortDays",value:function(e){return e.sort(function(e,t){return e.full_date>t.full_date?1:t.full_date>e.full_date?-1:0})}},{key:"sortEvents",value:function(e){return e.sort(function(e,t){return e.startDate>t.startDate?1:t.startDate>e.startDate?-1:0})}},{key:"render",value:function(){return this.getEventsDays()}}]),t}(n.Component)),j=function(e,t,a){return e.filter(function(e){if(e.startDate.getHours()>=t&&e.startDate.getHours()<=a)return e})},O=a(144),N=(a(99),a(141)),D=a(145),F=a(143),w=a(146),C=a(142),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={textF:{type:"text",status:!1,value:""},hourF:{type:"hour",status:!1,value:0},freeF:{type:"free",status:!1}},a.handleChangeName=a.handleChangeName.bind(Object(p.a)(a)),a.handleChangeSelect=a.handleChangeSelect.bind(Object(p.a)(a)),a.handleButton=a.handleButton.bind(Object(p.a)(a)),a}return Object(v.a)(t,e),Object(o.a)(t,[{key:"handleChangeName",value:function(e){var t,a=this;e.persist(),t=""!==e.target.value,this.setState(function(a){return{textF:Object(h.a)({},a.textF,{status:t,value:e.target.value})}},function(){a.props.textFilter(a.state.textF)})}},{key:"handleChangeSelect",value:function(e){var t,a=this;t=0!==e.target.value,this.setState(function(a){return{hourF:Object(h.a)({},a.hourF,{status:t,value:e.target.value})}},function(){a.props.startHour(a.state.hourF)})}},{key:"handleButton",value:function(){var e=this;this.setState(function(t){return{freeF:Object(h.a)({},t.freeF,{status:e.state.freeF.status=!e.state.freeF.status})}},function(){e.props.showFreeEvents(e.state.freeF)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"filters-box"},s.a.createElement("div",{className:"filters-row"},s.a.createElement(O.a,{id:"standard-name",label:"Name",className:"tf-name",value:this.state.textF.value,onChange:this.handleChangeName.bind(this),margin:"normal"}),s.a.createElement(N.a,{className:"fc-select-time"},s.a.createElement(D.a,{htmlFor:"age-simple"},"Start hour"),s.a.createElement(F.a,{value:this.state.hourF.value,onChange:this.handleChangeSelect.bind(this),inputProps:{name:"start-hour",id:"start-hour"}},s.a.createElement(w.a,{value:0},"Show all"),s.a.createElement(w.a,{value:1},"Morning (6am - 12pm)"),s.a.createElement(w.a,{value:2},"Afternoon (12pm - 17pm)"),s.a.createElement(w.a,{value:3},"Evening (17pm - 21pm)"),s.a.createElement(w.a,{value:4},"Night (21pm - 6am)"))),this.state.freeF.status?s.a.createElement(C.a,{variant:"contained",className:"btn btn-all",onClick:this.handleButton},"Show all events"):s.a.createElement(C.a,{variant:"contained",className:"btn btn-free",onClick:this.handleButton},"Show free events")))}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={original_events:[],events:[],cities:[],event:void 0,open:!1,filters:{text:{status:!1,value:""},hour:{status:!1,value:0},free:{status:!1}}},a.openModal=a.openModal.bind(Object(p.a)(a)),a.closeModal=a.closeModal.bind(Object(p.a)(a)),a.joinToEvent=a.joinToEvent.bind(Object(p.a)(a)),a.filterByText=a.filterByText.bind(Object(p.a)(a)),a.filterByStartHour=a.filterByStartHour.bind(Object(p.a)(a)),a.filterFreeEvents=a.filterFreeEvents.bind(Object(p.a)(a)),a.setFilters=a.setFilters.bind(Object(p.a)(a)),a}return Object(v.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.all([b.a.get("https://5d48447c2d59e50014f209ff.mockapi.io/trivago/events"),b.a.get("https://5d48447c2d59e50014f209ff.mockapi.io/trivago/cities")]).then(b.a.spread(function(t,a){e.setState({original_events:t.data}),e.setState({events:t.data}),e.setState({cities:a.data})})).catch(function(e){return console.log(e)})}},{key:"openModal",value:function(e){this.setState({event:e,open:!0})}},{key:"closeModal",value:function(){this.setState({event:null,open:!1})}},{key:"joinToEvent",value:function(){var e=this;b.a.get("https://5d48447c2d59e50014f209ff.mockapi.io/trivago/my-events").then(function(t){t.data.find(function(t){return t.meid===e.state.event.id})?alert("You are already subscribed to this event"):(e.state.event.meid=e.state.event.id,b.a.post("https://5d48447c2d59e50014f209ff.mockapi.io/trivago/my-events",e.state.event).then(function(t){e.setState({event:null,open:!1})}))})}},{key:"filterByText",value:function(e,t){var a=e.toLowerCase();return t.filter(function(e){var t=e.name.toLowerCase(),n=e.city.name.toLowerCase();if(-1!==t.indexOf(a)||-1!==n.indexOf(a))return e})}},{key:"filterByStartHour",value:function(e,t){switch(e){case 1:return j(t,6,12);case 2:return j(t,12,17);case 3:return j(t,17,21);case 4:return function(e,t,a){var n=e.filter(function(e){return e.startDate.getHours()>=t}),s=e.filter(function(e){return e.startDate.getHours()<=a});return n.concat(s)}(t,21,6);default:return t}}},{key:"filterFreeEvents",value:function(e){return e.filter(function(e){return e.isFree})}},{key:"setFilters",value:function(e){var t=this;this.setState(function(t){return{filters:Object(h.a)({},t.filters,Object(d.a)({},e.type,{status:e.status,value:e.value}))}},function(){return t.applyFilters()})}},{key:"applyFilters",value:function(){if(Object.values(this.state.filters).every(function(e){return!1===e.status}))this.setState({events:this.state.original_events});else{var e=this.state.original_events;this.state.filters.text.status&&(e=this.filterByText(this.state.filters.text.value,e)),this.state.filters.hour.status&&(e=this.filterByStartHour(this.state.filters.hour.value,e)),this.state.filters.free.status&&(e=this.filterFreeEvents(e)),this.setState({events:e})}}},{key:"render",value:function(){var e=this;return[s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mb-5"},s.a.createElement(M,{textFilter:this.setFilters,startHour:this.setFilters,showFreeEvents:this.setFilters})),s.a.createElement(k,{events:this.state.events,cities:this.state.cities,component:"All events",openModal:this.openModal})),s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{key:"popup",open:this.state.open,lockScroll:!0,contentStyle:{maxWidth:"800px",width:"90%"},closeOnDocumentClick:!1},function(t){return s.a.createElement("div",{className:"react-modal"},s.a.createElement("div",{className:"react-modal-header"},s.a.createElement("span",null,"Join the event"),s.a.createElement("button",{onClick:e.closeModal,className:"close-btn"},s.a.createElement("i",{className:"fas fa-times"}))),s.a.createElement("div",{className:"react-modal-body"},s.a.createElement("div",{className:"modal-text"},s.a.createElement("p",{className:"react-modal-description"},"You are about to sign up for ",s.a.createElement("b",null,e.state.event.name),". This event takes place the ",g(e.state.event.startDate)," in ",e.state.event.city.name,"."),s.a.createElement("p",null,"Are you sure?"))),s.a.createElement("div",{className:"react-modal-footer"},s.a.createElement("button",{className:"btn mr-3",onClick:e.closeModal},"Cancel"),s.a.createElement("button",{className:"btn",onClick:e.joinToEvent},"Join")))}))]}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={events:[]},a}return Object(v.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getMyEvents()}},{key:"getMyEvents",value:function(){var e=this;b.a.get("https://5d48447c2d59e50014f209ff.mockapi.io/trivago/my-events").then(function(t){e.setState({events:t.data})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},this.state.events.length>0?s.a.createElement(k,{events:this.state.events,component:"My events",refreshEvents:this.getMyEvents.bind(this)}):s.a.createElement("div",{className:"no-events"},s.a.createElement("span",null,"You are not subscribed to any event")))}}]),t}(n.Component),B=a(49),T=a(71),H=a.n(T),_=(a(103),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[S,x],t=B.a.map(function(e,t){return s.a.createElement(m.b,{key:"navlink-"+t,className:"nav-item",activeClassName:"active",to:e.route},e.name)}),a=B.a.map(function(t,a){return s.a.createElement(f.a,{key:"route-"+a,exact:!0,path:t.route,component:e[a]})});return s.a.createElement(m.a,null,s.a.createElement("div",{className:"header"},s.a.createElement("img",{className:"logo",src:H.a,alt:"Logo"}),s.a.createElement("div",{className:"container"},s.a.createElement("nav",{className:"nav"},t))),s.a.createElement(f.c,null,s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"main-wrapper mt-4 mb-4"},a))))}}]),t}(n.Component)),A=(a(105),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement(_,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);i.a.render(s.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},48:function(e,t,a){},49:function(e){e.exports={a:[{name:"All events",route:"/all-events"},{name:"My events",route:"/my-events"}]}},71:function(e,t,a){e.exports=a.p+"static/media/logo.8e68c54d.svg"},76:function(e,t,a){e.exports=a(107)},81:function(e,t,a){},99:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.3c70e5c8.chunk.js.map